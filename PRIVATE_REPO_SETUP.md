# Private Repo Setup Instructions

This document tells you what to do in your **private repository** (`nba_fb`) to sync data to the public GitHub Pages repo.

## Step 1: Copy the Sync Script

1. Copy `sync_to_public_template.py` from the public repo to your private repo
2. Rename it to `sync_to_public.py`
3. **Update the paths** in the script:
   ```python
   PRIVATE_REPO = Path(__file__).parent  # Should point to your nba_fb root
   PUBLIC_REPO = Path(r"C:\Users\chris\OneDrive\Documents\nba_fantasy_recaps")
   
   # Adjust these to match your private repo structure:
   PRIVATE_DATA_DIR = PRIVATE_REPO / "data"  # Where your recaps are
   PRIVATE_RECAP_PATTERN = "recap_week_*.md"  # Your markdown file pattern
   ```

## Step 2: Weekly Workflow

After generating a new weekly recap in your private repo:

```bash
# 1. Generate the recap (your existing command)
python fantasy_weekly_report_fast.py --week 8

# 2. Run the sync script
python sync_to_public.py

# 3. Go to public repo and commit
cd ../nba_fantasy_recaps
git add .
git commit -m "Update week 8 recap"
git push
```

## What the Sync Script Does

1. **Copies markdown files** from `data/recap_week_*.md` â†’ `md_recaps/`
2. **Copies and sanitizes metadata** from `data/league_metadata.json`
3. **Generates recaps index** from all markdown files
4. **Runs public repo scripts** to:
   - Extract standings/power rankings
   - Generate HTML pages
   - Update JS files

## Important Notes

### Metadata Sanitization

The sync script automatically removes risky fields from `league_metadata.json`. Make sure your private repo's metadata includes:
- `season`, `week`, `league_name`, `scoring_type`
- `teams[]` with: `team_id`, `team_name`, `owner`, `logo_url`

**It will NOT sync:**
- Email addresses
- ESPN cookies/tokens
- Member IDs tied to emails
- Any credential fields

### Markdown Files

Your markdown files should be in the format:
- `data/recap_week_8.md` (or whatever pattern you use)
- Must include:
  - `## ğŸ† League Standings` section with standings table
  - `## ğŸ’ª Weekly Power Ranking` section with power rankings table
  - `## ğŸ“– Storylines` section with quick hits

### File Structure

Your private repo should have:
```
nba_fb/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ recap_week_8.md          # Generated by your script
â”‚   â””â”€â”€ league_metadata.json      # Your metadata (will be sanitized)
â””â”€â”€ sync_to_public.py             # The sync script
```

## Troubleshooting

### "Public repo not found"
- Update `PUBLIC_REPO` path in `sync_to_public.py`

### "No markdown files found"
- Check `PRIVATE_DATA_DIR` and `PRIVATE_RECAP_PATTERN` in the script
- Make sure your markdown files match the pattern

### "Scripts failed to run"
- Make sure Python is in your PATH
- Check that the public repo has the `scripts/` folder with all scripts

### Standings not showing up
- Make sure your markdown has the exact section headers:
  - `## ğŸ† League Standings`
  - `## ğŸ’ª Weekly Power Ranking`
- Run `python scripts/extract_standings.py` manually in the public repo

## Security Reminder

**Before pushing to GitHub, always verify:**
- [ ] No `.env` files
- [ ] No ESPN credentials in any synced files
- [ ] `league_metadata.json` only has public-safe fields
- [ ] All markdown files are public-safe

The sync script sanitizes metadata, but double-check everything before committing!

